{"plugins":[{"db_name":"erxes","collections":[{"name":"users","schema":"{}","script":""},{"name":"conformities","schema":"\n          {\n            \"mainType\": {\n              \"type\": \"keyword\"\n            },\n            \"mainTypeId\": {\n              \"type\": \"keyword\"\n            },\n            \"relType\": {\n              \"type\": \"keyword\"\n            },\n            \"relTypeId\": {\n              \"type\": \"keyword\"\n            }\n          }\n        ","script":""}]},{"db_name":"erxes","collections":[{"name":"conversations","schema":"{ 'customFieldsData' : <nested> }","script":"if(ns.indexOf('conversations') > -1) {var createdAt = JSON.stringify(doc.createdAt); var closedAt = JSON.stringify(doc.closedAt); var updatedAt = JSON.stringify(doc.updatedAt); var firstRespondedDate = JSON.stringify(doc.firstRespondedDate); if(createdAt){ doc.numberCreatedAt = Number(new Date(createdAt.replace(/\"/g,''))); } if(closedAt){ doc.numberClosedAt = Number(new Date(closedAt.replace(/\"/g,''))); } if(updatedAt){ doc.numberUpdatedAt= Number(new Date(updatedAt.replace(/\"/g,''))); } if(firstRespondedDate){ doc.numberFirstRespondedDate= Number(new Date(firstRespondedDate.replace(/\"/g,''))); }}"},{"name":"conversation_messages","schema":"{}","script":""},{"name":"integrations","schema":"{}","script":""},{"name":"channels","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"cars","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"deals","schema":"{ 'userId': { 'type': 'keyword' }, 'stageId': { 'type': 'keyword' }, 'modifiedBy': { 'type': 'keyword' }, 'status': { 'type': 'keyword' }, 'assignedUserIds': { 'type': 'keyword' }, 'watchedUserIds': { 'type': 'keyword' }, 'labelIds': { 'type': 'keyword' }, 'customFieldsData': <nested> }","script":"if(ns.indexOf('deals') > -1) { if (doc.productsData) { var productsDataString = JSON.stringify(doc.productsData); var amount = 0; var productsData = JSON.parse(productsDataString); for (var i = 0; i < productsData.length; i++){ amount = amount + productsData[i].amount; } doc.amount = amount; } } "},{"name":"sales_stages","schema":"{}","script":""},{"name":"sales_pipelines","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"tasks","schema":"{ 'userId': { 'type': 'keyword' }, 'stageId': { 'type': 'keyword' }, 'modifiedBy': { 'type': 'keyword' }, 'status': { 'type': 'keyword' }, 'assignedUserIds': { 'type': 'keyword' }, 'watchedUserIds': { 'type': 'keyword' }, 'labelIds': { 'type': 'keyword' }, 'customFieldsData': <nested> }","script":""},{"name":"tasks_stages","schema":"{}","script":""},{"name":"tasks_pipelines","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"purchases","schema":"{ 'userId': { 'type': 'keyword' }, 'stageId': { 'type': 'keyword' }, 'modifiedBy': { 'type': 'keyword' }, 'status': { 'type': 'keyword' }, 'assignedUserIds': { 'type': 'keyword' }, 'watchedUserIds': { 'type': 'keyword' }, 'labelIds': { 'type': 'keyword' }, 'customFieldsData': <nested> }","script":"if(ns.indexOf('purchases') > -1) { if (doc.productsData) { var productsDataString = JSON.stringify(doc.productsData); var amount = 0; var productsData = JSON.parse(productsDataString); for (var i = 0; i < productsData.length; i++){ amount = amount + productsData[i].amount; } doc.amount = amount; } } "},{"name":"purchases_tages","schema":"{}","script":""},{"name":"purchases_pipelines","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"tickets","schema":"{ 'userId': { 'type': 'keyword' }, 'stageId': { 'type': 'keyword' }, 'modifiedBy': { 'type': 'keyword' }, 'status': { 'type': 'keyword' }, 'assignedUserIds': { 'type': 'keyword' }, 'watchedUserIds': { 'type': 'keyword' }, 'labelIds': { 'type': 'keyword' }, 'customFieldsData': <nested> }","script":""},{"name":"tickets_stages","schema":"{}","script":""},{"name":"tickets_pipelines","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"engage_messages","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"exm_feeds","schema":"{}","script":""},{"name":"exm_thanks","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"pos_orders","schema":"{'customerId': { 'type': 'keyword' }, 'customerType': { 'type': 'keyword' }, 'ownerId': { 'type': 'keyword' }}","script":""}]},{"db_name":"erxes","collections":[{"name":"emojis","schema":"{}","script":""},{"name":"comments","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"conversation_messages_facebooks","schema":"{}","script":""}]},{"db_name":"erxes","collections":[{"name":"xyp_datas","schema":"{}","script":""}]}]}
